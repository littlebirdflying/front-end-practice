<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=`, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="file" id="avatar">
    <script>
        // 1.前端文件下载
        // let str = '<div>hello world</div>'
        // // blob 文件类型 可以存储文件内容 文件的所有内容
        // const blob = new Blob([str], {
        //     type: 'text/html'
        // })
        // const a = document.createElement('a')
        // a.setAttribute('download', 'index.html')
        // a.href = URL.createObjectURL(blob)
        // a.click()
        
        // 1.前端可以通过html5实现二进制的读取
        avatar.addEventListener('change', e=>{
            let file = e.target.files[0]
            // file File类型 是Blob的子类
            // 这里方式是异步的  如果需要把文件读出来可以采用这种
            // let fileReader = new FileReader()
            // fileReader.onload = function () {
            //     let img = document.createElement('img')
            //     img.src = fileReader.result
            //     document.body.appendChild(img)
            // }
            // fileReader.readAsDataURL(file) // base64Url
            
            // 如果只是预览，可以直接生成路径
            let img = document.createElement('img')
            let url = URL.createObjectURL(file)
            img.src = url
            document.body.appendChild(img)
            URL.revokeObjectURL(url)
        })


        // 上传 formData中允许放blob -> 服务器 操作的是二进制



        // 浏览器中的二进制
        // 一个字节 由八个位组成 最大转换成十进制是255
        // ASCII 就是一个字节
        // gb2312 一个汉字由2个字节组成 255*255=65025用了一部分来设计汉字 
        // gbk => gb18030
        // unicode没统一起来=> utf8(js语言用的是utf16) utf8中一个汉字就是3个字节

        // 字节 汉字 不同的编码 汉字的字节不同
        const arrayBuffer = new ArrayBuffer(4)  // 4个字节 4 * 8
        console.log(arrayBuffer) //不能直接操作
        let x = new Uint8Array(arrayBuffer) // 操作二进制
        x[0] = 1
        x[1] = 255
        console.log(x) // [1, 255, 0, 0]
        //  0 0 11111111 00000001

        let x2 = new Uint16Array(arrayBuffer) // 16 2
        console.log(x2) // [65281, 0]
        //  0...0...  1111111100000001         0b1111111100000001 === 65281

        let x3 = new Uint32Array(arrayBuffer)
        console.log(x3) // [65281]
    </script>
</body>
</html>